---
title: "Benchmarks"
author: "Johan Larsson"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Benchmarks}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Benchmarks

In this vignette, we will provide a matrix of benchmarks for the
solvers, penalties, and GLM families in **golem**.

First, we setup a function to plot the results from the fit.

```{r}
set.seed(1)

library(golem)
library(lattice)
library(latticeExtra)

plot_optim <- function(fit) {
  d <- fit@diagnostics
  
  p1 <- xyplot(objective ~ time, data = d, groups = type, type = "l", 
               xlab = "Time (Seconds)", 
               subset = type != "Infeasibility", auto.key = TRUE)
  p2 <- xyplot(objective ~ time, data = d, type = "l", xlab = "Time (Seconds)",
               ylab = "Infeasibility",
               subset = type == "Infeasibility")
  
}
```

### Gaussian model

```{r, fig.cap = "Objective loss over time for the abalone data set (Gaussian response)."}
x <- as.matrix(abalone$x)
y <- abalone$y

fit <- golem(x, y, family = "gaussian",
             solver = Fista(diagnostics = TRUE))
plot_optim(fit)
```

### Binomial model

```{r, fig.cap = "Objective loss over time for the heart data set (binomial response)."}
x <- as.matrix(heart$x)
y <- heart$y

fit <- golem(x, y, family = "binomial",
             solver = Fista(diagnostics = TRUE))

plot_optim(fit)
```


